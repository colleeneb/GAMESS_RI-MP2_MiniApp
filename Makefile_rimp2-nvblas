FC=mpifort
FFLAGS=-qsmp=omp -qoffload -qsuffix=cpp=f90 -DNVBLAS -g -L/sw/ascent/cuda/10.1.105/lib64/ -lnvblas  -L$(OLCF_ESSL_ROOT)/lib64 -lessl
#FFLAGS=-qsmp=omp -qsuffix=cpp=f90 -DGPU -g -L$(OLCF_ESSL_ROOT)/lib64 -lessl
#FFLAGS=-qsmp=omp -qsuffix=cpp=f90 -g -L$(OLCF_ESSL_ROOT)/lib64 -lessl
# offloading:
#FFLAGS=-qsmp=omp -g -qoffload
EXES=rimp2

all: $(EXES)

rimp2: rimp2_energy_whole_KERN.o
	$(FC) -o $@ $(FFLAGS) $^ $(LDFLAGS)


.SUFFIXES:
.SUFFIXES: .c .o .f90 .cu .cpp .cuf
.c.o:
	$(CC) $(CFLAGS) -c $<
.cpp.o:
	$(CXX) $(CXXFLAGS) -c $<
.f90.o:
	$(FC) $(FFLAGS) -c $<
.PHONY: clean
clean:
	rm -rf *.o *.mod $(EXES)
